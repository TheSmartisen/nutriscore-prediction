{% extends "base.html" %}

{% block title %}Nutriscore Prediction Form{% endblock %}

{% block content %}
<div class="container">
    <!-- Result Section -->
    <div id="result-popup" class="popup" style="display: none;">
        <div class="popup-content">
            <h1>Predicted <span id="popup-predicted-score"></span></h1>
            <img id="popup-nutriscore-image" src="" alt="Nutri-Grade Label" class="nutriscore-image">
            <div class="popup-buttons">
                <button id="reset-button" class="button">Reset Form</button>
                <button id="keep-values-button" class="button">Back to Form</button>
            </div>
        </div>
    </div>

    <!-- Prediction Form -->
    <div class="form-section">
        <h1 class="text-center mb-4">Nutriscore AI Prediction Form</h1>
        <form id="predict-form">
            {{ form.hidden_tag() }}
            
            <div class="form-group">
                <label for="pnns_groups_1">Main Food Group</label>
                <select id="pnns_groups_1" name="pnns_groups_1" class="form-control" required>
                    {% for group in pnns_groups_list %}
                        <option value="{{ group }}">{{ group }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <div class="form-group">
                <label for="energy_100g">Energy (kj per 100g)</label>
                <input type="number" id="energy_100g" name="energy_100g" class="form-control" step="0.01" value="0" required>
            </div>
            
            <div class="form-group">
                <label for="fat_100g">Fat (g per 100g)</label>
                <input type="number" id="fat_100g" name="fat_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group">
                <label for="saturated-fat_100g">Saturated Fat (g per 100g)</label>
                <input type="number" id="saturated-fat_100g" name="saturated-fat_100g" class="form-control" step="0.01" value="0" required>
            </div>
            
            <div class="form-group hidden">
                <label for="trans-fat_100g">Trans Fat (g per 100g)</label>
                <input type="number" id="trans-fat_100g" name="trans-fat_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group hidden">
                <label for="cholesterol_100g">Cholesterol (g per 100g)</label>
                <input type="number" id="cholesterol_100g" name="cholesterol_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group">
                <label for="sugars_100g">Sugars (g per 100g)</label>
                <input type="number" id="sugars_100g" name="sugars_100g" class="form-control" step="0.01" value="0" required>
            </div>
            
            <div class="form-group">
                <label for="proteins_100g">Proteins (g per 100g)</label>
                <input type="number" id="proteins_100g" name="proteins_100g" class="form-control" step="0.01" value="0" required>
            </div>
            
            <div class="form-group">
                <label for="sodium_100g">Sodium (g per 100g)</label>
                <input type="number" id="sodium_100g" name="sodium_100g" class="form-control" step="0.01" value="0" required>
            </div>
            
            <div class="form-group hidden">
                <label for="carbohydrates_100g">Carbohydrates (g per 100g)</label>
                <input type="number" id="carbohydrates_100g" name="carbohydrates_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group hidden">
                <label for="calcium_100g">Calcium (g per 100g)</label>
                <input type="number" id="calcium_100g" name="calcium_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group hidden">
                <label for="iron_100g">Iron (g per 100g)</label>
                <input type="number" id="iron_100g" name="iron_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group hidden">
                <label for="salt_100g">Salt (g per 100g)</label>
                <input type="number" id="salt_100g" name="salt_100g" class="form-control" step="0.01" value="0">
            </div>
            
            <div class="form-group">
                <label for="fiber_100g">Fiber (g per 100g)</label>
                <input type="number" id="fiber_100g" name="fiber_100g" class="form-control" step="0.01" value="0" required>
            </div>
            
            <div class="form-group">
                <label for="fruits-vegetables-nuts-estimate-from-ingredients_100g">Fruits, Vegetables, Nuts Estimate (g per 100g)</label>
                <input type="number" id="fruits-vegetables-nuts-estimate-from-ingredients_100g" name="fruits-vegetables-nuts-estimate-from-ingredients_100g" class="form-control" step="0.01" value="0" required>
            </div>

            <!-- Predict button -->
            <div class="button-fixed" id="predict-button">
                Predict
            </div>
        </form>
    </div>
</div>

<script src="{{ url_for('static', filename='js/predictions.js') }}"></script>

{% endblock %}
